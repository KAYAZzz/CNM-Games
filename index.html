<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CNM Games</title>

<!-- Logo & Fullscreen -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="CNM Games">
<link rel="apple-touch-icon" href="https://raw.githubusercontent.com/KAYAZzz/CNM-Games/main/Logo.png">
<link rel="icon" type="image/png" href="https://raw.githubusercontent.com/KAYAZzz/CNM-Games/main/Logo.png">

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonts & Styles -->
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
body { font-family: 'Inter', sans-serif; background-color: #1a1a2e; }

/* Plasma Background */
.plasma-background {
    background: radial-gradient(circle at 10% 20%, rgba(200,20,255,0.1) 0%, rgba(0,0,0,0) 70%),
                radial-gradient(circle at 90% 80%, rgba(100,0,255,0.1) 0%, rgba(0,0,0,0) 70%),
                #1a1a2e;
    background-size: 200% 200%;
    animation: movePlasma 40s ease-in-out infinite alternate;
}
@keyframes movePlasma { 0% { background-position:0% 0%; } 100% { background-position:100% 100%; } }

/* Shiny Text */
.shiny-text {
    background-image: linear-gradient(90deg,#6d28d9 0%,#f87171 20%,#a78bfa 40%,#f87171 60%,#6d28d9 80%);
    background-size: 200% auto;
    color: transparent; -webkit-background-clip: text; background-clip: text;
    animation: shine 4s linear infinite; display: inline-block;
}
@keyframes shine { to { background-position:200% center; } }

/* Hero Intro */
.hero {
    position: relative;
    display: flex; justify-content: center; align-items: center;
    text-align: center; height: 60vh;
    background: linear-gradient(135deg,#6d28d9,#f87171,#a78bfa,#f87171,#6d28d9);
    background-size: 400% 400%; animation: gradientMove 15s ease infinite;
}
@keyframes gradientMove {
    0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}
}
.hero h1 { font-size: 3rem; font-weight: 800; color: white; margin-bottom:1rem; text-shadow: 0 0 15px rgba(0,0,0,0.6);}
.hero p { color: #e0e0ff; font-size: 1.25rem; margin-bottom:1.5rem;}
.hero .hero-buttons a {
    margin: 0 0.5rem; padding: 0.75rem 1.5rem;
    font-weight: 600; border-radius: 0.75rem; transition: transform 0.2s, background 0.2s;
}
.hero .hero-buttons a:hover { transform: scale(1.05); }
.hero .play-btn { background-color:#8b5cf6; color:white; }
.hero .suggest-btn { background-color:#f97316; color:white; }

/* Line clamp & fade-in */
.line-clamp-2 {-webkit-box-orient: vertical; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2;}
@keyframes fadeIn {from{opacity:0;transform:scale(0.95);}to{opacity:1;transform:scale(1);}}
.animate-fadeIn {animation:fadeIn 0.3s ease-out;}
</style>
</head>
<body class="plasma-background min-h-screen text-gray-100 antialiased">

<!-- Hero Intro -->
<section class="hero">
<div>
    <h1 class="shiny-text">Welcome to CNM Games</h1>
    <p>Discover hundreds of web games, from arcade classics to modern challenges!</p>
    <div class="hero-buttons">
        <a href="#game-grid" class="play-btn">Play Now</a>
        <a href="#" class="suggest-btn">Suggest a Game</a>
    </div>
</div>
</section>

<!-- Header/Nav -->
<header class="bg-gray-900/80 backdrop-blur-sm shadow-2xl z-50 w-full sticky top-0">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 flex flex-col md:flex-row justify-between items-start md:items-center">
    <div class="mb-4 md:mb-0 flex items-center">
        <svg class="w-10 h-10 mr-3 text-pink-400 transform rotate-[-15deg]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            <circle cx="12" cy="12" r="8" stroke-width="2"/>
            <line x1="12" y1="8" x2="12" y2="12" stroke-width="2"/>
            <line x1="12" y1="12" x2="15" y2="15" stroke-width="2"/>
        </svg>
        <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight"><span class="shiny-text">CNM Games</span></h1>
    </div>
    <p class="text-xs text-gray-400 mt-2 md:mt-0">User ID: <span id="user-id-display" class="font-mono text-purple-400 break-all">Authenticating...</span></p>
    <div class="w-full md:w-80 lg:w-96 mt-4 md:mt-0">
        <div class="relative">
            <input type="text" id="search-input" placeholder="Search title or category..." class="w-full py-3 pl-12 pr-4 border border-indigo-500/50 rounded-full focus:ring-4 focus:ring-indigo-500 focus:border-indigo-500 transition duration-300 bg-gray-800 text-gray-50 placeholder-gray-400 shadow-xl"/>
            <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 h-6 w-6 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        </div>
    </div>
</div>
</header>

<!-- Main Game Grid -->
<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <div class="mb-10 flex items-center space-x-4">
        <h2 class="text-3xl font-bold text-gray-200">Total Games:</h2>
        <span id="game-count" class="text-pink-400 text-5xl font-extrabold tracking-tight">0</span>
    </div>
    <div id="game-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6"></div>
</main>

<!-- Panic Button -->
<button id="panic-button" class="fixed bottom-4 right-4 z-[2000] p-4 text-white bg-red-600 rounded-full shadow-2xl hover:bg-red-700 transition transform hover:scale-[1.05] flex items-center space-x-2 font-bold text-lg">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg><span>PANIC</span>
</button>

<!-- Game Modal -->
<div id="game-modal" class="fixed inset-0 bg-gray-900 bg-opacity-95 items-center justify-center transition-opacity duration-300 hidden z-[1000]">
    <div id="modal-content" class="w-full h-full relative">
        <button id="close-modal-btn" class="absolute top-0 right-0 z-50 bg-red-600 text-white p-3 m-2 rounded-full shadow-xl hover:bg-red-700 transition duration-150 transform hover:rotate-90"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
        <div id="loading-overlay" class="absolute inset-0 bg-gray-900 flex flex-col items-center justify-center p-8 transition-opacity duration-300 z-40">
            <div id="loading-spinner" class="animate-spin rounded-full h-12 w-12 border-b-4 border-indigo-500 mb-4"></div>
            <p id="loading-text" class="text-xl text-gray-400">Loading external game...</p>
            <div id="link-fallback" class="hidden text-center mt-6 p-6 max-w-lg w-full rounded-xl bg-gray-800/50 shadow-2xl border-t-4 border-indigo-500">
                <p class="text-sm text-gray-300 mb-4 font-semibold">The game didn't load inside the hub. This usually means the host site blocks embedding.</p>
                <a id="open-in-new-tab" href="#" target="_blank" class="inline-block bg-indigo-600 text-white py-3 px-6 rounded-full font-semibold hover:bg-indigo-700 transition transform hover:scale-[1.05] shadow-lg">Open Game in New Tab</a>
            </div>
        </div>
        <iframe id="game-iframe" src="" class="w-full h-full shadow-2xl bg-gray-900" title="Game Player" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
</div>

<!-- Suggest Game Popup -->
<div id="suggest-game-popup" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[4000] hidden">
  <div class="relative bg-gray-900 border-2 border-purple-600 rounded-2xl shadow-2xl p-8 max-w-lg w-[90%] text-gray-100 animate-fadeIn">
    <h2 class="text-3xl font-extrabold text-purple-400 mb-4">üéÆ Suggest a Game!</h2>
    <p class="mb-6 text-gray-300">Want your favorite games added to CNM Games? Click the button below and submit your suggestions!</p>
    <a id="suggest-game-link" href="#" target="_blank" class="inline-block bg-indigo-600 text-white py-3 px-6 rounded-full font-semibold hover:bg-indigo-700 transition transform hover:scale-[1.05] shadow-lg">Suggest a Game</a>
    <button id="close-suggest-popup" class="absolute top-3 right-3 bg-red-600 hover:bg-red-700 text-white rounded-full p-2 transition">‚úï</button>
  </div>
</div>

<!-- Changelog Popup -->
<div id="changelog-popup" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[3000] hidden">
  <div class="relative bg-gray-900 border-2 border-purple-600 rounded-2xl shadow-2xl p-8 max-w-lg w-[90%] text-gray-100 animate-fadeIn">
    <h2 class="text-3xl font-extrabold text-purple-400 mb-4">‚ÄºÔ∏èIMPORTANT‚ÄºÔ∏è</h2>
    <div id="changelog-content" class="space-y-3 text-gray-300">
      <p>üïπÔ∏è <strong>October 24, 2025:</strong>Addition of <span class="text-purple-400">Golf Orbit!‚õ≥</span></p>
      <p>üïπÔ∏è <strong>October 25, 2025:</strong>Addition of <span class="text-purple-400">RagDoll Archers!üèπ</span></p>
      <p>üïπÔ∏è <strong>October 25, 2025:</strong>Addition of <span class="text-purple-400">Helix Jump!‚öΩ</span></p>
      <p>üïπÔ∏è <strong>October 30, 2025:</strong>Addition of <span class="text-purple-400">Polytrack!üèéÔ∏è</span></p>
      <p>üïπÔ∏è <strong>October 30, 2025:</strong>Addition of <span class="text-purple-400">Gobble!üëÑ</span></p>
    </div>
    <button id="close-changelog" class="absolute top-3 right-3 bg-red-600 hover:bg-red-700 text-white rounded-full p-2 transition">‚úï</button>
  </div>
</div>

<!-- Scripts -->
<script type="module">
// Your existing Firebase + game rendering logic here (copy from your main file)
// Handles initialization, search, postMessage, modal open/close, panic, countup, etc.
</script>
</body>
</html>
